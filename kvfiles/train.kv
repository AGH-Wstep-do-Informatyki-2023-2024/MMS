#:kivy 2.2.1
#:import hex kivy.utils.get_color_from_hex

<TrainLabel>:
    iconlabel: icon
    namelabel: name
    height: 200

    canvas.before:
        Color:
            rgb: hex('#1E1E1E')
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [10,]
    BoxLayout:
        orientation: 'horizontal'
        size: root.size
        pos: root.pos
        Image:
            id: icon
            size_hint: 0.4, 1
            padding: 40
        Label:
            id: name
            text_size: self.size
            font_size: '40sp'
            halign: 'left'
            valign: 'middle'
    
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        size: root.size
        pos: root.pos
        Button:
            size: self.size
            pos: self.pos
            background_color: 0, 0, 0, 0
            on_press: root.show_description()


<TrainTop>:
    id: train_top
    button: button
    size: self.size
    orientation: 'horizontal'
    Label:
        text: 'Twoje treningi:'
        text_size: self.size
        font_size: '45sp'
        halign: 'left'
        valign: 'middle'
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        size_hint: 0.42, 1
        padding: 25
        Button:
            id: button
            background_color: 1, 1, 1, 1
            background_normal: './img/plus-white.png'
            background_down: './img/plus-white.png'
            on_release: root.new_training()


<TrainContent>:
    cols: 1
    size_hint_y: None
    spacing: 0, 30
    padding: 25, 50

<BackButton>:
    size: 25, 25
    size_hint: 0.18, 1
    pos: self.pos
    background_color: 1, 1, 1, 1
    background_normal: './img/caret-left-white.png'
    background_down: './img/caret-left-white.png'
    on_release: self.go_back()

<TopBackButton>:
    layout: layout
    size: root.size
    pos: root.pos

    AnchorLayout:
        id: layout
        pos: root.pos
        size: root.size
        anchor_x: 'left'
        anchor_y: 'center'
        padding: 8


<DarkTextInput>:
    size: self.size
    pos: self.pos
    background_color: hex('#1E1E1E')
    background_normal: './img/white.png'
    background_active: './img/white.png'
    foreground_color: 1, 1, 1, 1
    disabled_foreground_color: hex('#FFFFFFF')
    cursor_color: hex('#FFFFFF')
    border: 0, 0, 0, 0
    font_size: '35sp'
    hint_text_color: hex('#777777')

<IconButton>:
    pos: self.pos
    background_color: 1, 1, 1, 1
    on_release: self.change()

<NewTrainingFirstContent>:
    icons: icons
    tbb: tbb
    name: name
    description: description

    cols: 1
    size: root.size
    pos: root.pos
    spacing: 30
    padding: 20

    TopBackButton:
        id: tbb
        size_hint: 1, 0.08
    
    Label:
        text: 'NOWY TRENING'
        font_size: '60sp'
        size_hint: 1, 0.13

    BoxLayout:
        size_hint: 1, 0.1
        orientation: 'vertical'
        DarkTextInput:
            id: name
            size_hint: 1, 0.95
            hint_text: 'nazwa'
            multiline: False
            max_length: 12
        Separator:
            size_hint: 1, 0.05

    DarkTextInput:
        id: description
        size_hint: 1, 0.4
        hint_text: 'opis'
        max_length: 140

    BoxLayout:
        orientation: 'vertical'
        size_hint: 1, 0.2

        canvas.before:
            Color:
                rgba: hex('#1E1E1E')
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [10,]
        
        Label:
            text: 'Ikona'
            size_hint: 1, 0.25
            font_size: '30sp'
            text_size: self.size
            color: hex('#777777')
        BoxLayout:
            id: icons
            orientation: 'horizontal'
            padding: 25
            spacing: 15
    AnchorLayout:
        id: layout_next
        pos: self.pos
        size: self.size
        size_hint: 1, 0.08
        anchor_x: 'right'
        anchor_y: 'center'
        padding: 8
        Button:
            size: 20, 20
            size_hint: 0.18, 1
            pos: self.pos
            background_color: 1, 1, 1, 1
            background_normal: './img/caret-double-right-white.png'
            background_down: './img/caret-double-right-white.png'
            on_release: root.go_next('train_new_training_second')
            canvas.before:
                Color:
                    rgb: hex('#1E1E1E')
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10,]

<NewStepLabel@BoxLayout>:
    img: img
    label: label

    orientation: 'horizontal'
    height: 150
    canvas.before:
        Color:
            rgb: hex('#1E1E1E')
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [70,]

    Image:
        id: img
        # source: './img/barbell-white.png'
        size: self.texture_size
        size_hint: 0.3, 1
        text_size: self.size
    Label:
        id: label
        # text: 'Cwiczenie 1'
        font_size: '50sp'
        size_hint: 0.7, 1

<NewExerciseWindow>:
    canvas.before:
        Color:
            rgba: hex('#19191C')
        Rectangle:
            size: self.size
            pos: self.pos

<NewTimerWindow>:
    canvas.before:
        Color:
            rgba: hex('#19191C')
        Rectangle:
            size: self.size
            pos: self.pos


<NewExerciseContent@GridLayout>:
    tbb: tbb
    ex_name: ex_name
    ex_description: ex_description

    cols: 1
    size: root.size
    pos: root.pos
    spacing: 30
    padding: 20

    TopBackButton:
        id: tbb
        size_hint: 1, 0.08
    
    Label:
        text: 'NOWE ĆWICZENIE'
        font_size: '55sp'
        size_hint: 1, 0.13

    BoxLayout:
        size_hint: 1, 0.1
        orientation: 'vertical'
        DarkTextInput:
            id: ex_name
            size_hint: 1, 0.95
            hint_text: 'nazwa ćwiczenia'
            multiline: False
            max_length: 10
        Separator:
            size_hint: 1, 0.05

    DarkTextInput:
        id: ex_description
        size_hint: 1, 0.4
        hint_text: 'opis ćwiczenia'
        # focus: True
        max_length: 140
    AnchorLayout:
        id: layout_next
        pos: self.pos
        size: self.size
        size_hint: 1, 0.08
        anchor_x: 'right'
        anchor_y: 'center'
        padding: 8
        Button:
            size: 20, 20
            size_hint: 0.18, 1
            pos: self.pos
            background_color: 1, 1, 1, 1
            background_normal: './img/check-white.png'
            background_down: './img/check-white.png'
            on_release: root.add_exercise()
            canvas.before:
                Color:
                    rgb: hex('#1E1E1E')
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10,]

<NewTimerContent@GridLayout>:
    tbb: tbb
    timer: timer

    cols: 1
    size: root.size
    pos: root.pos
    spacing: 30
    padding: 20

    TopBackButton:
        id: tbb
        size_hint: 1, 0.08
    
    Label:
        text: 'NOWY TIMER'
        font_size: '60sp'
        size_hint: 1, 0.13

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'top'
        size_hint: 1, 0.7
        BoxLayout:
            orientation: 'vertical'
            size_hint: 0.9, 0.4
            DarkTextInput:
                id: timer
                hint_text: ''
                font_size: '80sp'
                multiline: False
                max_length: 4
                # focus: True
                # padding_x: 80
                halign: 'center'
                padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
            Label:
                text: 'sekund'
                font_size: '55sp'
                color: hex('#777777')

    AnchorLayout:
        id: layout_next
        pos: self.pos
        size: self.size
        size_hint: 1, 0.08
        anchor_x: 'right'
        anchor_y: 'center'
        padding: 8
        Button:
            size: 20, 20
            size_hint: 0.18, 1
            pos: self.pos
            background_color: 1, 1, 1, 1
            background_normal: './img/check-white.png'
            background_down: './img/check-white.png'
            on_release: root.add_timer()
            canvas.before:
                Color:
                    rgb: hex('#1E1E1E')
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10,]


<AddExercise@Button>:
    canvas.before:
        Color:
            rgb: hex('#1E1E1E')
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [90,]

<NewExerciseMenu@BoxLayout>:
    orientation: 'horizontal'
    padding: 60, 8, 60, 8
    spacing: 60
    height: 200
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        padding: 10
        AddExercise:
            size: 30, 30
            background_color: 1, 1, 1, 1
            background_normal: './img/plus-white.png'
            background_down: './img/plus-white.png'
            on_release: self.add_exercise()
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        padding: 10
        AddExercise:
            size: 30, 30
            background_color: 1, 1, 1, 1
            background_normal: './img/clock-white.png'
            background_down: './img/clock-white.png'
            on_release: self.add_timer()
    
<NewTrainingSecondContent>:
    tbb: tbb
    content_layout: content_layout
    name_label: name_label
    scroll: scroll

    cols: 1
    size: root.size
    pos: root.pos
    spacing: 0, 20
    padding: 30, 30

    TopBackButton:
        id: tbb
        size_hint: 1, 0.08
    
    BoxLayout:
        orientation: 'vertical'
        size_hint: 1, 0.08
        Label:
            id: name_label
            text: 'nazwa'
            font_size: '60sp'
        Separator:
    ScrollView:
        id: scroll
        do_scroll_y: True
        do_scroll_x: False
        bar_color: 0, 0, 0, 0
        bar_inactive_color: 0, 0, 0, 0
        effect_cls: 'ScrollEffect'
        size_hint: 1, 0.76
        GridLayout:
            id: content_layout
            cols: 1
            size_hint_y: None
            spacing: 40

    AnchorLayout:
        id: layout_next
        pos: self.pos
        size: self.size
        size_hint: 1, 0.08
        anchor_x: 'right'
        anchor_y: 'center'
        padding: 8
        Button:
            size: 20, 20
            size_hint: 0.18, 1
            pos: self.pos
            background_color: 1, 1, 1, 1
            background_normal: './img/check-white.png'
            background_down: './img/check-white.png'
            on_release: root.go_next()
            canvas.before:
                Color:
                    rgb: hex('#1E1E1E')
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [50,]

<NewTrainingFirst>:
    canvas.before:
        Color:
            rgba: hex('#19191C')
        Rectangle:
            size: self.size
            pos: self.pos

<NewTrainingSecond>:
    canvas.before:
        Color:
            rgba: hex('#19191C')
        Rectangle:
            size: self.size
            pos: self.pos

<Separator>:
    size_hint: 1, 0.03
    canvas.before:
        Color:
            rgb: hex('#E1E1E1')
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [3,]